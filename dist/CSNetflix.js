(()=>{const e=document.createElement("div");let t;async function n(e){if(!t)return null;if(!e)return null;try{const n=await fetch(`https://www.omdbapi.com/?t=${encodeURIComponent(e)}&apikey=${t}`);if(!n.ok)return null;const o=await n.json();return"False"===o?.Response?null:o}catch{return null}}function o(){const e=document.querySelector(".about-header strong"),t=document.querySelector(".previewModal--boxart");return e?.textContent?.trim()||t?.alt?.trim()||null}function i(e){const n=function(){const e="my-imdb-rating-extension-badge";let t=document.querySelector(".videoMetadata--line");t&&(t.style.cssText="margin-bottom: 5px");let n=document.getElementById(e);return n||(n=document.createElement("div"),n.id=e,n.style.cssText='\n    height: 1.25rem;\n  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,\n               "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans",\n               sans-serif, "Apple Color Emoji", "Segoe UI Emoji",\n               "Segoe UI Symbol", "Noto Color Emoji";\n  font-weight: 500;\n  color: #ffffff;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: inherit;\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n  border-radius: 0.25rem;\n  font-size:12px;\n    ',t&&t.appendChild(n)),n}();n&&(n.textContent=t?e:"")}e.textContent="Netflix",e.style.cssText="\n  position: fixed;\n  z-index: 999999;\n  top: 12px;\n  right: 12px;\n  padding: 6px 10px;\n  border-radius: 8px;\n  background: rgba(0,0,0,0.75);\n  color: white;\n  font: 12px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial;\n",document.documentElement.appendChild(e),setTimeout(()=>e.remove(),2e3),chrome.storage.sync.get("apiKey",e=>{t=e.apiKey}),(async()=>{let e=o(),t=await n(e);(async()=>{new MutationObserver(async()=>{const a=o();if(null!==a&&a!==e){e=a;const o=await n(a);o?.imdbRating||i("No IMDb"),"N/A"===o?.imdbRating&&i("No IMDb"),i(o?.imdbRating?`IMDb ${o?.imdbRating}`:"No IMDb"),t=o}document.getElementById("my-imdb-rating-extension-badge")||(t?.imdbRating||i("No IMDb"),"N/A"===t?.imdbRating&&i("No IMDb"),i(t?.imdbRating?`IMDb ${t?.imdbRating}`:"No IMDb"))}).observe(document.documentElement,{childList:!0,subtree:!0,characterData:!0})})()})()})();